<?php

namespace App\DataFixtures;

use App\Entity\Image;
use App\Entity\Produits;
use App\Entity\ImageProduit;
use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Persistence\ObjectManager;

class ZImageProduitFixtures extends Fixture
{
    public function load(ObjectManager $manager): void
    {
        // Obtenez les repositories pour Image et Produits
        $imageRepo = $manager->getRepository(Image::class);
        $produitRepo = $manager->getRepository(Produits::class);

        // Assurez-vous que les IDs dans vos données existent dans la base de données
        $data = [
            [1, 4, 6],
            [2, 6, 7],
            [3, 11, 9],
            [4, 10, 10],
            [5, 8, 8],
            [6, 16, 5],
            [7, 14, 1],
            [8, 15, 4],
            [9, 13, 3],
            [10, 12, 2],
            [11, 17, 15],
            [12, 20, 14],
            [13, 21, 13],
            [14, 19, 11],
            [15, 18, 12],
            [16, 26, 19],
            [17, 25, 17],
            [18, 23, 18],
            [19, 24, 20],
            [20, 22, 16],
            [21, 31, 23],
            [22, 29, 22],
            [23, 27, 25],
            [24, 28, 24],
            [25, 30, 21],
            [26, 36, 27],
            [27, 35, 26],
            [28, 34, 30],
            [29, 33, 29],
            [30, 32, 28],
            [31, 41, 31],
            [32, 40, 32],
            [33, 39, 33],
            [34, 38, 35],
            [35, 37, 34],
            [36, 46, 37],
            [37, 45, 39],
            [38, 44, 38],
            [39, 43, 40],
            [40, 42, 36],
            [41, 51, 44],
            [42, 50, 43],
            [43, 49, 42],
            [44, 48, 45],
            [45, 47, 41],
            [46, 56, 48],
            [47, 55, 49],
            [48, 54, 46],
            [49, 53, 47],
            [50, 52, 50],
            [51, 58, 1],
            [52, 59, 1],
            [53, 60, 2],
            [54, 61, 2],
            [55, 5, 51],
            [56, 63, 3],
            [57, 62, 3],
            [58, 66, 4],
            [59, 67, 4],
            [60, 68, 5],
            [61, 69, 5],
            [62, 70, 6],
            [63, 71, 6],
            [64, 72, 10],
            [65, 73, 10],
            [66, 74, 8],
            [67, 75, 8],
            [68, 76, 7],
            [69, 77, 7],
            [70, 78, 9],
            [71, 79, 9],
            [72, 80, 51],
            [73, 81, 51],
            [74, 82, 11],
            [75, 83, 11],
            [76, 84, 12],
            [77, 85, 12],
            [78, 90, 13],
            [79, 91, 13],
            [80, 88, 14],
            [81, 89, 14],
            [82, 86, 15],
            [83, 87, 15],
            [84, 92, 16],
            [85, 93, 16],
            [88, 98, 17],
            [89, 99, 17],
            [90, 94, 18],
            [91, 95, 18],
            [92, 100, 19],
            [93, 101, 19],
            [94, 96, 20],
            [95, 97, 20],
            [96, 108, 21],
            [97, 109, 21],
            [98, 110, 22],
            [99, 111, 22],
            [100, 102, 23],
            [101, 103, 23],
            [102, 104, 24],
            [103, 105, 24],
            [104, 106, 25],
            [105, 107, 25],
            [106, 116, 26],
            [107, 117, 26],
            [108, 118, 27],
            [109, 119, 27],
            [110, 112, 28],
            [111, 113, 28],
            [112, 114, 29],
            [113, 115, 29],
            [114, 120, 30],
            [115, 121, 30],
            [116, 130, 31],
            [117, 131, 31],
            [118, 124, 32],
            [119, 125, 32],
            [120, 126, 33],
            [121, 127, 33],
            [122, 122, 34],
            [123, 123, 34],
            [124, 128, 35],
            [125, 129, 35],
            [126, 136, 36],
            [127, 137, 36],
            [128, 132, 37],
            [129, 133, 37],
            [130, 138, 38],
            [131, 139, 38],
            [132, 140, 39],
            [133, 141, 39],
            [134, 134, 40],
            [135, 135, 40],
            [136, 144, 41],
            [137, 145, 41],
            [138, 146, 42],
            [139, 147, 42],
            [140, 149, 43],
            [141, 150, 43],
            [142, 151, 44],
            [143, 152, 44],
            [144, 142, 45],
            [145, 143, 45],
            [146, 157, 46],
            [147, 158, 46],
            [148, 155, 47],
            [149, 156, 47],
            [150, 159, 48],
            [151, 160, 48],
            [152, 161, 49],
            [153, 162, 49],
            [154, 153, 50],
            [155, 154, 50]
        ];

        foreach ($data as [$id, $imageId, $produitId]) {
            $image = $imageRepo->find($imageId);
            $produit = $produitRepo->find($produitId);

            if ($image && $produit) {
                $imageProduit = new ImageProduit();
                $imageProduit->setImage($image);
                $imageProduit->setProduit($produit);
                $manager->persist($imageProduit);
            }
        }

        $manager->flush();
    }
}
